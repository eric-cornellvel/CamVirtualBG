{"version":3,"sources":["demo_util.js"],"names":["getSizeFromImageLikeElement","input","offsetHeight","offsetWidth","height","width","Error","getSizeFromVideoElement","videoHeight","videoWidth","getInputSize","HTMLCanvasElement","HTMLImageElement","ImageData","HTMLVideoElement","tf","Tensor","shape","offScreenCanvases","isSafari","test","navigator","userAgent","assertSameDimensions","_a","_b","nameA","nameB","widthA","heightA","widthB","heightB","flipCanvasHorizontal","canvas","ctx","getContext","scale","translate","drawWithCompositing","image","compositOperation","globalCompositeOperation","drawImage","createOffScreenCanvas","offScreenCanvas","document","createElement","ensureOffscreenCanvasCreated","id","drawAndBlurImageOnCanvas","blurAmount","clearRect","save","cpuBlur","filter","restore","drawAndBlurImageOnOffScreenCanvas","offscreenCanvasName","renderImageToCanvas","renderImageDataToCanvas","putImageData","renderImageDataToOffScreenCanvas","canvasName","renderImageToOffScreenCanvas"],"mappings":"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","file":"demo_util.ff527207.js","sourceRoot":"..","sourcesContent":["function getSizeFromImageLikeElement(input) {\n    if (input.offsetHeight !== 0 && input.offsetWidth !== 0) {\n        return [input.offsetHeight, input.offsetWidth];\n    }\n    else if (input.height != null && input.width != null) {\n        return [input.height, input.width];\n    }\n    else {\n        throw new Error(\"HTMLImageElement must have height and width attributes set.\");\n    }\n}\nfunction getSizeFromVideoElement(input) {\n    if (input.height != null && input.width != null) {\n        return [input.height, input.width];\n    }\n    else {\n        return [input.videoHeight, input.videoWidth];\n    }\n}\nexport function getInputSize(input) {\n    if ((typeof (HTMLCanvasElement) !== 'undefined' &&\n        input instanceof HTMLCanvasElement) ||\n        (typeof (HTMLImageElement) !== 'undefined' &&\n            input instanceof HTMLImageElement)) {\n        return getSizeFromImageLikeElement(input);\n    }\n    else if (typeof (ImageData) !== 'undefined' && input instanceof ImageData) {\n        return [input.height, input.width];\n    }\n    else if (typeof (HTMLVideoElement) !== 'undefined' &&\n        input instanceof HTMLVideoElement) {\n        return getSizeFromVideoElement(input);\n    }\n    else if (input instanceof tf.Tensor) {\n        return [input.shape[0], input.shape[1]];\n    }\n    else {\n        throw new Error(\"error: Unknown input type: \" + input + \".\");\n    }\n}\n\nvar offScreenCanvases = {};\nfunction isSafari() {\n    return (/^((?!chrome|android).)*safari/i.test(navigator.userAgent));\n}\nfunction assertSameDimensions(_a, _b, nameA, nameB) {\n    var widthA = _a.width, heightA = _a.height;\n    var widthB = _b.width, heightB = _b.height;\n    if (widthA !== widthB || heightA !== heightB) {\n        throw new Error(\"error: dimensions must match. \" + nameA + \" has dimensions \" + widthA + \"x\" + heightA + \", \" + nameB + \" has dimensions \" + widthB + \"x\" + heightB);\n    }\n}\nfunction flipCanvasHorizontal(canvas) {\n    var ctx = canvas.getContext('2d');\n    ctx.scale(-1, 1);\n    ctx.translate(-canvas.width, 0);\n}\nfunction drawWithCompositing(ctx, image, compositOperation) {\n    ctx.globalCompositeOperation = compositOperation;\n    ctx.drawImage(image, 0, 0);\n}\nfunction createOffScreenCanvas() {\n    var offScreenCanvas = document.createElement('canvas');\n    return offScreenCanvas;\n}\nexport function ensureOffscreenCanvasCreated(id) {\n    if (!offScreenCanvases[id]) {\n        offScreenCanvases[id] = createOffScreenCanvas();\n    }\n    return offScreenCanvases[id];\n}\nfunction drawAndBlurImageOnCanvas(image, blurAmount, canvas) {\n    var height = image.height, width = image.width;\n    var ctx = canvas.getContext('2d');\n    canvas.width = width;\n    canvas.height = height;\n    ctx.clearRect(0, 0, width, height);\n    ctx.save();\n    if (isSafari()) {\n        cpuBlur(canvas, image, blurAmount);\n    }\n    else {\n        ctx.filter = \"blur(\" + blurAmount + \"px)\";\n        ctx.drawImage(image, 0, 0, width, height);\n    }\n    ctx.restore();\n}\nexport function drawAndBlurImageOnOffScreenCanvas(image, blurAmount, offscreenCanvasName) {\n    var canvas = ensureOffscreenCanvasCreated(offscreenCanvasName);\n    if (blurAmount === 0) {\n        renderImageToCanvas(image, canvas);\n    }\n    else {\n        drawAndBlurImageOnCanvas(image, blurAmount, canvas);\n    }\n    return canvas;\n}\nfunction renderImageToCanvas(image, canvas) {\n    var width = image.width, height = image.height;\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n    ctx.drawImage(image, 0, 0, width, height);\n}\nfunction renderImageDataToCanvas(image, canvas) {\n    canvas.width = image.width;\n    canvas.height = image.height;\n    var ctx = canvas.getContext('2d');\n    ctx.putImageData(image, 0, 0);\n}\nexport function renderImageDataToOffScreenCanvas(image, canvasName) {\n    var canvas = ensureOffscreenCanvasCreated(canvasName);\n    renderImageDataToCanvas(image, canvas);\n    return canvas;\n}\nexport function renderImageToOffScreenCanvas(image, canvasName) {\n    var canvas = ensureOffscreenCanvasCreated(canvasName);\n    renderImageToCanvas(image, canvas);\n    return canvas;\n}\nexport function drawWithCompositing(ctx, image, compositOperation) {\n    ctx.globalCompositeOperation = compositOperation;\n    ctx.drawImage(image, 0, 0);\n}\n\n\n"]}